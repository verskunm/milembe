!function(t,e){for(var n in e)t[n]=e[n]}(window,function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://assets.allegrostatic.com/opbox-carousel/",n(n.s=0)}({0:function(t,e,n){t.exports=n("O14P")},O14P:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e);var s=n("sBL/"),a=n.n(s),c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,o=arguments.length>2?arguments[2]:void 0;i(this,t),this.element=e,this.duration=n,this.callback=o,this.animation=null}return r(t,[{key:"scrollTo",value:function(t){var e=this.element.scrollLeft,n={duration:this.duration,onFinish:this.callback};this.animation&&this.animation.stop(),this.animation=window.opbox.tween(e,t,function(t){return function(e){t.scrollLeft=e}}(this.element),n)}}]),t}(),u='[data-role="carousel"]',h='[data-role="carousel-container"]',f=".".concat("carousel-item"),d='[data-role="carousel-prev-button"]',v='[data-role="carousel-next-button"]',m=800,b="next",p="prev",y=24;function w(t){return t.filter((function(t){return null!==t.offsetParent})).map((function(t){var e=t.node;return{node:e,left:Math.max(e.offsetLeft,0),right:e.offsetLeft+e.clientWidth}})).sort((function(t,e){return t.left-e.left}))}function k(t,e,n){return n===b?t.find((function(t){return t.left>e})):t.reverse().find((function(t){return t.left<e}))}function g(t,e){return function(n,i){var o=n.left,r=n.right;return o-t>=0&&r-t<=e?i:-1}}function x(t,e){return function(n,i){var o=n.left,r=n.right,l=o-t,s=r-t;if(l<=0&&s>=e)return i;var a=.25*(r-o);return l+a>=0&&s-a<=e?i:-1}}function L(t,e,n){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).requireFullVisibility,o=void 0===i||i?g:x;return t.map(o(e,n)).filter((function(t){return-1!==t}))}var S=function(){function t(e){var n=this;i(this,t),l(this,"itemContainer",null),l(this,"items",[]),l(this,"loadItemList",(function(t){n.items=Array.from(t,(function(t){return{node:t}}))})),this.itemContainer=e}return r(t,[{key:"getNewScrollPositionNormalized",value:function(t,e){var n=this.itemContainer.clientWidth,i=this.itemContainer.scrollWidth-n,o=this.getNewScrollPosition(t,e);return Math.max(Math.min(o,i),0)}},{key:"getNewScrollPosition",value:function(t,e){var n=e||this.itemContainer.scrollLeft,i=this.itemContainer.clientWidth,o=w(this.items),r=L(o,n,i);if(r.length){var l=function(t,e,n,i,o){var r=function(t,e,n){return t[n===b?function(t,e){return Math.min(e[e.length-1]+1,t.length-1)}(t,e):function(t){return Math.max(t[0]-1,0)}(e)]}(e,n,t);if(t===b)return r.left;var l=r.right-i,s=k(e,l,b);return s?s.left>=o?l:s.left:0}(t,o,r,i,n),s=n+i*(t===b?1:-1)-l;if(Math.abs(s)<=i)return l}var a=k(o,n,t);if(a){var c=a.left,u=c-n;if(Math.abs(u)<i&&1!==u)return c}return t===b?n+i-32:n-i+32}}]),t}(),C={LEFT:"prev",RIGHT:"next"},E=function(){function t(e,n){var o=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),l(this,"handleScroll",(function(t){var e=t.target.scrollLeft;if(e!==o.lastHorizontalScrollPosition){var n=e>o.lastHorizontalScrollPosition;o.onScroll(n?C.RIGHT:C.LEFT),o.lastHorizontalScrollPosition=e}})),this.container=e,this.onScroll=n,this.lastHorizontalScrollPosition=0,this.scrollDebounceTime=r,this.debouncedHandler=a()(this.handleScroll,this.scrollDebounceTime),this.attachEvents()}return r(t,[{key:"attachEvents",value:function(){this.container.addEventListener("scroll",this.debouncedHandler,!1)}},{key:"detachEvents",value:function(){this.container.removeEventListener("scroll",this.debouncedHandler)}}]),t}(),B=120,V=200,P=function(){function t(e){var n=this,o=e.baseNode;i(this,t),l(this,"elements",{}),l(this,"btnState",[]),l(this,"touchInterface",!1),l(this,"viewportWidth",0),l(this,"onScroll",(function(t){n.window.opbox.analytics.sendBoxInteractionEvent({contextNode:n.scrollContainer,label:"scroll",value:t})})),l(this,"onArrowClick",(function(t){return function(e){e&&e.preventDefault();var i=n.itemVisibility.getNewScrollPositionNormalized(t,n.elements.container.scrollLeft);n.scrollTo(i)}})),l(this,"onCarouselAppearance",(function(){n.checkVisibleItems()})),l(this,"debouncedOnCarouselAppearance",a()(this.onCarouselAppearance,B)),l(this,"onHorizontalScroll",(function(){n.refreshButtonVisibility(),n.checkVisibleItems()})),l(this,"onHorizontalScrollEnd",a()(this.onHorizontalScroll,B)),l(this,"onResize",(function(){n.window.innerWidth===n.viewportWidth||(n.viewportWidth=n.window.innerWidth,n.onHorizontalScrollEnd())})),l(this,"onResizeEnd",a()(this.onResize,V));var r,s,f=o.querySelector(u),w=f.offsetHeight>0&&f.children&&f.children[0]?(s=(r=f.children[0])&&r.children&&r.children[0]?r.offsetHeight-r.children[0].offsetHeight:y,Math.abs(s)):y;this.window=window,this.carouselNode=f,this.scrollContainer=f.querySelector(h),this.elements={container:this.scrollContainer,prevButton:f.querySelector(d),nextButton:f.querySelector(v)},this.itemVisibility=new S(this.scrollContainer),this.scrollable=new c(this.elements.container,m),this.scrollOnData=f.hasAttribute("data-scroll-ondata"),this.onPrevButtonClick=this.onArrowClick(p),this.onNextButtonClick=this.onArrowClick(b),this.onHorizontalScroll(),this.hideScrollbar(w),this.setCarouselVisibility(),this.mutationObserver=new MutationObserver((function(t){t.filter((function(t){return"childList"===t.type})).length>0&&n.setCarouselVisibility()})),this.mutationObserver.observe(this.scrollContainer,{attributes:!1,childList:!0,subtree:!0}),this.scrollObserver=new E(this.scrollContainer,this.onScroll,B)}return r(t,[{key:"onMount",value:function(){var t=this.elements,e=t.container,n=t.prevButton,i=t.nextButton;this.window.addEventListener("resize",this.onResizeEnd),this.window.addEventListener("inViewport",this.debouncedOnCarouselAppearance),e.addEventListener("scroll",this.onHorizontalScrollEnd),n.addEventListener("click",this.onPrevButtonClick),i.addEventListener("click",this.onNextButtonClick)}},{key:"onUnmount",value:function(){var t=this.elements,e=t.container,n=t.prevButton,i=t.nextButton;this.window.removeEventListener("resize",this.onResizeEnd),this.window.removeEventListener("inViewport",this.debouncedOnCarouselAppearance),e.removeEventListener("scroll",this.onHorizontalScrollEnd),n.removeEventListener("click",this.onPrevButtonClick),i.removeEventListener("click",this.onNextButtonClick),this.mutationObserver.disconnect(),this.scrollObserver.detachEvents()}},{key:"setCarouselVisibility",value:function(){this.itemElements.length?(t.showCarousel(this.carouselNode),this.itemVisibility.loadItemList(this.itemElements),this.checkVisibleItems()):t.collapseCarousel(this.carouselNode),this.refreshButtonVisibility()}},{key:"scrollTo",value:function(t){this.scrollable.scrollTo(t),this.refreshButtonVisibility(t)}},{key:"checkVisibleItems",value:function(){var t=this.elements.container.closest("[data-box-name]"),e=this.window.opbox.boxViewsMarker;if(e.isBoxInViewport(t)){var n=w(this.itemVisibility.items);L(n,this.elements.container.scrollLeft,this.elements.container.clientWidth,{requireFullVisibility:!1}).forEach((function(t){var i=n[t].node;e.markBoxAsVisible(i.closest("[data-item]")),e.markBoxAsVisible(i.closest("[data-box-name]"))}))}}},{key:"refreshButtonVisibility",value:function(t){var e=!this.touchInterface&&this.isNextButtonEnabled(t),n=!this.touchInterface&&this.isPrevButtonEnabled(t);this.setButtonVisibility("prev",this.elements.prevButton,n),this.setButtonVisibility("next",this.elements.nextButton,e)}},{key:"setButtonVisibility",value:function(t,e,n){Boolean(this.btnState[t])!==n&&(this.btnState[t]=n,n?(e.classList.add("_he3t1"),e.classList.remove("_773dc_3Q22v")):(e.classList.remove("_he3t1"),e.classList.add("_773dc_3Q22v")))}},{key:"isNextButtonEnabled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.elements.container,n=e.scrollWidth,i=e.clientWidth,o=e.scrollLeft,r=i>0?n-i-20:0,l=null!==t?t:o;return l<=r}},{key:"isPrevButtonEnabled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=null!==t?t:this.elements.container.scrollLeft;return e>=20}},{key:"hideScrollbar",value:function(t){this.elements.container.style.marginBottom="-".concat(t,"px")}},{key:"onUpdate",value:function(){this.scrollOnData&&this.scrollTo(0)}},{key:"itemElements",get:function(){return this.scrollContainer.querySelectorAll(f)}}],[{key:"collapseCarousel",value:function(t){t.classList.add("_lsy4e")}},{key:"showCarousel",value:function(t){t.classList.remove("_lsy4e")}}]),t}();window.opbox.component.register({prototypeName:"allegro.carousel"},P)},"sBL/":function(t,e){function n(t,e,n){var i,o,r,l,s;function a(){var c=Date.now()-l;c<e&&c>=0?i=setTimeout(a,e-c):(i=null,n||(s=t.apply(r,o),r=o=null))}null==e&&(e=100);var c=function(){r=this,o=arguments,l=Date.now();var c=n&&!i;return i||(i=setTimeout(a,e)),c&&(s=t.apply(r,o),r=o=null),s};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(s=t.apply(r,o),r=o=null,clearTimeout(i),i=null)},c}n.debounce=n,t.exports=n}}));
//# sourceMappingURL=index_27c3aedc.js.map