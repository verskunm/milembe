!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://assets.allegrostatic.com/opbox-search/",n(n.s=0)}({0:function(e,t,n){e.exports=n("O14P")},"6MUB":function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(s){var i=encodeURIComponent(r(s))+n;return Array.isArray(e[s])?e[s].map((function(e){return i+encodeURIComponent(r(e))})).join(t):i+encodeURIComponent(r(e[s]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""}},O14P:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var o=n("kiQV"),c=n("r8II"),u=n.n(c),d=n("gEZS"),l=n.n(d),h="AD",g="ALL",f="CATEGORY",p="DEPARTMENT",v="ENDED",y="USER_NAME",m="USERS",k="NORMAL",b="STRONG",S={depth:0,componentType:"LABEL",labelItems:[{type:k,content:"PODOBNI UŻYTKOWNICY"}]};function E(e){return e.tracking.type===h?"":e.labelItems.filter((function(e){return[k,b].includes(e.type)})).map((function(e){return e.content.trim()})).join(" ")}function I(e){var t=e.labelItems.filter((function(e){return"PRIMARY"===e.type}));return t.length?t[t.length-1].content:"Wszędzie"}function _(e){return e.path.split("?")[0]}function w(e){return e===m||e===v}var C=k,x=b;function A(e,t){var n=function(e){return e.labelItems.map((function(e){return e.content})).join("").toLowerCase()};return e.findIndex((function(e){return n(e)===n(t)}))}var N={depth:0,componentType:"LABEL",labelItems:[{type:C,content:"OSTATNIE WYSZUKIWANIA"}]};function R(){var e=[];try{e=JSON.parse(window.localStorage.getItem("recentlySearchedSuggestions"))}catch(e){window.opbox.reportError(e)}return Array.isArray(e)?(e.forEach((function(e,t){e.tracking.index0=t})),e):[]}function L(){var e=R();return e.length?[N].concat(e):[]}function T(e){var t=e.config,n=(t=void 0===t?{}:t).searchInDescriptionsEnabled,r=e.filters,s=(r=void 0===r?{}:r).checkedFilter,i=(s=void 0===s?{}:s).type;return n&&!w(void 0===i?"":i)}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.suggester,n=(t=void 0===t?{}:t).list,r=t.isExpanded;return(T(e)||n.length>0)&&!r}var P=function(){function e(t,n){var s=this;r(this,e),a(this,"setTracking",(function(e){var t=e.tracking;return s.tracking=t||null,e})),this.data=n,this.baseNode=t,this.emitter=new l.a,this.suggestionsRequestCounter=0,this.tracking=null}return i(e,[{key:"fetchSuggestions",value:function(e){var t=this,n=e.queryParams,r=e.categoryType,s=e.suggestionsRequestCounter,i=u.a.stringify(n),a=r===m?"/suggestions/sellers":"/suggest/web/suggestions";window.opbox.edge.get("".concat(a,"?").concat(i),{withCredentials:!0}).then((function(e){return e.data})).then(this.setTracking).then(function(e){return function(t){var n=t.suggestions;return n.length?e!==m?n:function(e){var t=e.map((function(e,t){return{depth:1,path:e.url,componentType:"SUGGESTION",labelItems:[{type:k,content:e.description}],tracking:{index0:t,type:m}}}));return[S].concat(t)}(n):[]}}(r)).then((function(e){t.updateSuggesterList({suggestions:e,recentlyTypedPhrases:!1,status:200,suggestionsRequestCounter:s})})).catch((function(e){t.updateSuggesterList({suggestions:[],status:e&&e.status?e.status:e,suggestionsRequestCounter:s})}))}},{key:"setPhrase",value:function(e,t,n){if(decodeURIComponent(this.data.search.phrase).trim()!==e.trim()){var r=encodeURIComponent(e.trim());this.data.search.phrase=r,t||(this.data.search.typedPhrase=r,this.updateSuggestions(e)),n||this.emitter.emit("SEARCH_PHRASE_CHANGE",e)}}},{key:"increaseRequestCounter",value:function(){return this.suggestionsRequestCounter+=1,this.suggestionsRequestCounter}},{key:"updateSuggestions",value:function(e){var t=this.increaseRequestCounter(),n=this.data.filters.checkedFilter,r=[f,p,y,v].includes(n.type),s=[f,p].includes(n.type),i=[y].includes(n.type);""!==e?this.fetchSuggestions({queryParams:Object.assign({phrase:e,rwd:this.data.config.mobileFeaturesEnabled},r?{scope:n.type.toLowerCase()}:{},r&&s?{"scope-value":n.id}:{},r&&i?{"scope-value":n.name}:{}),categoryType:n.type,suggestionsRequestCounter:t}):this.updateSuggesterList({suggestions:L(),recentlyTypedPhrases:!0,status:200,suggestionsRequestCounter:t})}},{key:"emitFocusOnSearchInput",value:function(){this.emitter.emit("SEARCH_FORCE_FOCUS")}},{key:"changeSuggesterIsExpanded",value:function(e){this.data.suggester.isExpanded=void 0===e?!this.data.suggester.isExpanded:e,this.emitter.emit("SUGGESTER_EXPAND_CHANGE",this.data.suggester.isExpanded)}},{key:"changeSearchInDescription",value:function(e){this.data.searchInDescriptions=void 0===e?!this.data.searchInDescriptions:e,this.emitter.emit("SEARCH_IN_DESCRIPTIONS_CHANGE")}},{key:"setCheckedFilter",value:function(e){this.data.filters.checkedFilter=e}},{key:"changeDisplayedFilter",value:function(e){var t=this.data.filters.list.find((function(t){return t.url===e}));this.data.filters.checkedFilter=t||this.data.filters.list[0],this.setCheckedFilterToDisplay(),this.data.suggester.list=[],this.data.suggester.suggestions=[],this.data.suggester.activeIndex=null,this.data.suggester.isExpanded=!1,w(this.data.filters.checkedFilter.type)&&this.changeSearchInDescription(!1),this.emitter.emit("FILTER_CHANGE")}},{key:"setCheckedFilterToDisplay",value:function(){this.setCheckedFilter(this.data.filters.checkedFilter)}},{key:"updateCheckedFilter",value:function(e,t){this.setCheckedFilter(function(e){return{url:_(e),name:I(e),id:e.tracking.categoryId,type:e.tracking.type}}(e)),t&&this.emitter.emit("FILTER_CHANGE")}},{key:"markNextSuggestion",value:function(){if(this.data.suggester.suggestions.length){null===this.data.suggester.activeIndex?this.data.suggester.activeIndex=0:this.data.suggester.activeIndex=(this.data.suggester.activeIndex+1)%this.data.suggester.suggestions.length;var e=this.data.suggester.suggestions[this.data.suggester.activeIndex];this.updateCheckedFilter(e),this.setPhrase(E(e),!0),O(this.data)&&this.changeSuggesterIsExpanded(!0),this.emitter.emit("SUGGESTER_ACTIVE_INDEX_CHANGE",this.data.suggester.activeIndex)}}},{key:"markPrevSuggestion",value:function(){if(this.data.suggester.suggestions.length){null===this.data.suggester.activeIndex||0===this.data.suggester.activeIndex?this.data.suggester.activeIndex=this.data.suggester.suggestions.length-1:this.data.suggester.activeIndex-=1;var e=this.data.suggester.suggestions[this.data.suggester.activeIndex];this.updateCheckedFilter(e),this.setPhrase(E(e),!0),O(this.data)&&this.changeSuggesterIsExpanded(!0),this.emitter.emit("SUGGESTER_ACTIVE_INDEX_CHANGE",this.data.suggester.activeIndex)}}},{key:"markSuggestion",value:function(e){this.data.suggester.activeIndex=e,this.emitter.emit("SUGGESTER_ACTIVE_INDEX_CHANGE",e)}},{key:"updateSuggesterList",value:function(e){var t=e.suggestions,n=e.status,r=void 0===n?null:n,s=e.changeExpand,i=void 0===s||s,a=e.recentlyTypedPhrases,o=void 0!==a&&a,c=e.suggestionsRequestCounter,u=this.data.search.phrase||o;this.suggestionsRequestCounter<=c&&u&&(this.data.suggester.list=t,this.data.suggester.activeIndex=null,this.data.suggester.recentlyTypedPhrases=o,this.data.suggester.suggestions=function(e){return e.filter((function(e){return"LABEL"!==e.componentType}))}(t),this.emitter.emit("SUGGESTER_LIST_CHANGE",r),i&&(O(this.data)?this.changeSuggesterIsExpanded(!0):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.suggester,n=(t=void 0===t?{}:t).list,r=t.isExpanded;return!T(e)&&0===n.length&&r}(this.data)&&this.changeSuggesterIsExpanded(!1)))}},{key:"checkDisplayModalAfterClick",value:function(){var e=this.data.config.displayModalAfterClick&&!this.data.config.displayModalAfterClickClicked;return e&&(this.data.config.displayModalAfterClickClicked=!0,window.opbox.preferences.set("multisearchDisplayModalAfterClick",!0)),e}}]),e}();function D(e){return'[data-role="'.concat(e,'"]')}function F(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(D).join()}var q=["p","us_id","string","description","show-raty0-disclaimer","fromCart"];function H(e,t){var n=new window.URL(window.location.href),r=e.includes(n.pathname)&&!e.includes("/listing"),s=u.a.parse([u.a.stringify(t),r?n.search.replace("?",""):""].filter(Boolean).join("&"));return q.forEach((function(e){delete s[e]})),s}var M=function(){function e(t,n){r(this,e),this.baseNode=t,this.store=n}return i(e,[{key:"redirectPageFromSuggestion",value:function(e){var t,n,r,s,i,a,o,c=(n=(t={suggestion:e,searchInDescriptions:this.store.data.searchInDescriptions,additionalParams:this.store.data.search.additionalParams}).additionalParams,r=t.searchInDescriptions,i=H(s=t.suggestion.path,n),a=u.a.stringify(Object.assign(r?{description:1}:{},i)),o=s.includes("?")?"&":"?","".concat(s).concat(a?o:"").concat(a));document.location.assign(c)}},{key:"redirectPageFromScope",value:function(){var e,t,n,r,s,i,a,o,c,d,l=(n=(e={phrase:this.baseNode.querySelector(F("search-input")).value.trim(),scope:this.store.data.filters.checkedFilter,searchInDescriptions:this.store.data.searchInDescriptions,additionalParams:this.store.data.search.additionalParams}).phrase,r=e.additionalParams,s=e.searchInDescriptions,a=H(i=(t=e.scope).url||"/uzytkownik/".concat(n),r),o=n&&t.type!==m,c=u.a.stringify(Object.assign(o?{string:n}:{},s?{description:1}:{},a)),d=i.includes("?")?"&":"?","".concat(i).concat(c?d:"").concat(c));document.location.assign(l)}},{key:"submit",value:function(e){e.preventDefault();var t=this.store.data.suggester,n=t.activeIndex,r=t.suggestions,s=this.baseNode.querySelector(F("search-input")),i=this.store.data.search.phrase.trim();if(s&&!this.store.data.search.phrase&&(i=s.value.trim()),"number"==typeof n&&"submit"!==e.target.type){var a=r[n];!function(e,t){if(e.tracking.type!==h){var n=R(),r=Object.assign({depth:1},e,{labelItems:e.labelItems.map((function(e){return e.type===x?{type:C,content:e.content}:e}))});e.tracking.type===m&&(r.labelItems.some((function(e){return e.content.includes("w nazwach użytkowników")}))||r.labelItems.push({type:"SECONDARY",content:" w nazwach użytkowników"})),/\/uzytkownik\/.+(\/|\?)/.test(e.path)&&(r.labelItems.some((function(e){return e.content.includes("w ofertach użytkownika")}))||r.labelItems.push({type:"SECONDARY",content:' w ofertach użytkownika "'.concat(t.name,'"')})),/\/zakonczone(\/|\?)/.test(e.path)&&(r.labelItems.some((function(e){return e.content.includes("w ofertach zakończonych")}))||r.labelItems.push({type:"SECONDARY",content:" w ofertach zakończonych"}));var s=A(n,r);0!==s&&window.localStorage.setItem("recentlySearchedSuggestions",JSON.stringify([r].concat(n.filter((function(e,t){return t!==s}))).slice(0,5)))}}(a,this.store.data.filters.checkedFilter),this.redirectPageFromSuggestion(a)}else{if(!i&&[g,p,v,m].includes(this.store.data.filters.checkedFilter.type))return;(function(e){var t=e.phrase,n=e.category;if(t){var r=R(),s=function(e){return e.type===y?' w ofertach użytkownika "'.concat(e.name,'"'):e.type===v?" w ofertach zakończonych":e.type===m?" w nazwach użytkowników":e.type!==g?" w kategorii > ":""}(n),i=function(e){return[y,m,g,v].includes(e.type)?"":e.name}(n),a={path:n.type===m?"/uzytkownik/".concat(t):"".concat(n.url,"?string=").concat(t),depth:1,componentType:"SUGGESTION",tracking:{type:n.type,categoryId:n.id},labelItems:[{type:C,content:decodeURIComponent(t)},s&&{type:"SECONDARY",content:s},i&&{type:"PRIMARY",content:i}].filter(Boolean)},o=A(r,a);0!==o&&window.localStorage.setItem("recentlySearchedSuggestions",JSON.stringify([a].concat(r.filter((function(e,t){return t!==o}))).slice(0,5)))}})({phrase:i,category:this.store.data.filters.checkedFilter}),this.redirectPageFromScope()}}},{key:"changePhrase",value:function(e){this.baseNode.querySelector(F("search-input")).value=e}},{key:"changeSearchInDescriptions",value:function(){var e=this.baseNode.querySelector(F("search-in-description"));e&&(e.checked=this.store.data.searchInDescriptions)}}]),e}();function G(e,t){return{types:e.reduce((function(e,n){var r=t?"recently-typed--".concat(n.tracking.type).toLowerCase():n.tracking.type;return e[r]?e[r]+=1:e[r]=1,e}),{}),count:e.length}}function j(e){var t=e.find((function(e){return e.tracking.type===h}));return t?t.tracking.campaignId:null}function U(e){return e.code||e.type}var z=function(){function e(t,n){r(this,e),this.baseNode=t,this.store=n}return i(e,[{key:"sendEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.baseNode.querySelector(F("search-input"));window.opbox.analytics.sendEvent(r,e,t,n)}},{key:"sendLayerViewEvent",value:function(e){if(e){var t={searchPhrase:this.store.data.search.phrase};this.sendEvent("suggestLayerView",1,t)}}},{key:"sendSuggestsShowEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.store.data.search.phrase,n="suggestionsShow",r=Object.assign({status:e,searchPhrase:decodeURIComponent(t),suggestions:G(this.store.data.suggester.suggestions,this.store.data.suggester.recentlyTypedPhrases),scope:U(this.store.data.filters.checkedFilter)},this.store.tracking),s=j(this.store.data.suggester.suggestions);s&&(r.campaignId=s),this.sendEvent(n,t,r)}},{key:"sendClickEvent",value:function(e,t){var n=t.tracking,r=(n.type,function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(n,["type"])),s=E(t),i=this.store.data.suggester.recentlyTypedPhrases?"recently-typed--".concat(t.tracking.type).toLowerCase():t.tracking.type,a=this.store.data.search.typedPhrase?decodeURIComponent(this.store.data.search.typedPhrase):null,o=Object.assign({typedPhrase:a,searchPhrase:s,type:i},r,this.store.tracking);this.sendEvent(e,s,o)}}]),e}(),Y=function(){function e(t,n,s,i){r(this,e),this.baseNode=t,this.store=n,this.searchForm=s,this.cookieMonster=i}return i(e,[{key:"toggleRemoveQuery",value:function(){var e=this.baseNode.querySelector(F("remove-query"));e&&(""===this.store.data.search.phrase?e.classList.remove("_d25db_3SRLR"):e.classList.add("_d25db_3SRLR"))}},{key:"handleSearchChange",value:function(e){var t=e.currentTarget.value;this.store.data.search.phrase!==t&&this.store.setPhrase(t,!1,!0),this.toggleRemoveQuery()}},{key:"handleRemoveQueryClick",value:function(e){e.preventDefault(),this.store.setPhrase(""),this.toggleRemoveQuery(),this.setFocusOnInput()}},{key:"prepareSendHintClickEvent",value:function(){null!==this.store.data.suggester.activeIndex&&this.cookieMonster.sendClickEvent("suggestHintClick",this.store.data.suggester.suggestions[this.store.data.suggester.activeIndex])}},{key:"handleEscapeKeyDown",value:function(e){"Escape"===e.key&&this.store.changeSuggesterIsExpanded(!1)}},{key:"toggleSearch",value:function(){this.store.changeSuggesterIsExpanded(),this.store.emitFocusOnSearchInput()}},{key:"handleKeyDown",value:function(e){switch(e.key){case"ArrowDown":this.store.markNextSuggestion();break;case"ArrowUp":this.store.markPrevSuggestion();break;case"Enter":this.prepareSendHintClickEvent(),this.searchForm.submit(e);break;case"Escape":case"Tab":return void this.store.changeSuggesterIsExpanded(!1);default:return void this.store.setCheckedFilterToDisplay()}e.preventDefault()}},{key:"setFocusOnInput",value:function(){this.baseNode.querySelector(F("search-input")).focus()}}]),e}();function B(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function V(e){var t,n,r="";if(e)if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=V(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(n=V(t))&&(r&&(r+=" "),r+=n);else"boolean"==typeof e||e.call||(r&&(r+=" "),r+=e);return r}var Q=function(){for(var e,t=0,n="";t<arguments.length;)(e=V(arguments[t++]))&&(n&&(n+=" "),n+=e);return n};function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},K=RegExp(Object.keys(W).join("|"),"g");function X(e,t){return null==t&&(t=","),e.length<=0?new Z([""],[]):new Z([""].concat(function(e){if(Array.isArray(e))return $(e)}(n=Array(e.length-1).fill(t))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return $(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,void 0):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[""]),e);var n}var Z=function(){function e(t,n){r(this,e),this._parts=t,this._subs=n}return i(e,[{key:"_escapeHtml",value:function(t){return t instanceof e?t:Array.isArray(t)?X(t,""):(t+"").replace(K,(function(e){return W[e]}))}},{key:"toString",value:function(){var e=this;return this._parts.reduce((function(t,n,r){var s=e._subs[r-1];return t+e._escapeHtml(s)+n}))}},{key:"inspect",value:function(){return"".concat(this.constructor.name," '").concat(this.toString(),"'")}}]),e}();function J(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Z(e,n)}function ee(){var e=B(["",'="','"']);return ee=function(){return e},e}function te(){var e=B(["",""]);return te=function(){return e},e}function ne(e,t){var n=t.name,r=t.value;return r?e.push(J(ee(),n,r)):e.push(J(te(),n)),e}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return X(e.filter(Boolean).reduce(ne,[])," ")}var se,ie=n("xxrt");function ae(){var e=B(['<span data-type="','" class="','">',"</span>"]);return ae=function(){return e},e}function oe(){var e=B(['<span data-type="','" class="','">',"</span>"]);return oe=function(){return e},e}function ce(){var e=B(['<span data-type="','" class="','">',"</span>"]);return ce=function(){return e},e}function ue(){var e=B(['<span data-type="','">',"</span>"]);return ue=function(){return e},e}var de,le=(a(se={},k,(function(e){var t=e.content,n=e.type;return J(ue(),n,t)})),a(se,b,(function(e){var t=e.content,n=e.type;return J(ce(),n,"_d25db_3gpWr",t)})),a(se,"PRIMARY",(function(e){var t=e.content,n=e.type;return J(oe(),n,ie.h,t)})),a(se,"SECONDARY",(function(e){var t=e.content,n=e.type;return J(ae(),n,ie.f,t)})),se);function he(e){return le[e.type](e)}function ge(){var e=B(['<a role="option" href="','" data-index="','" class="','" id="suggestion-','" style="padding-left: ','px" data-role="','"><img alt="','" src="','" class="','"><div class="','"><div>',"</div>","</div>","</a>"]);return ge=function(){return e},e}function fe(){var e=B(["<div>","</div>"]);return fe=function(){return e},e}function pe(){var e=B(['<a role="option" href="','" data-index="','" class="','" id="suggestion-','" data-role="','" style="padding-left: ','px"><div class="','">',"</div>","</a>"]);return pe=function(){return e},e}function ve(){var e=B(['<div data-role="','" class="','" style="padding-left: ','px"><div class="','">',"</div></div>"]);return ve=function(){return e},e}var ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 8*e+8},me=Q("_d25db_1pzE5",ie.g,ie.l,ie.u,ie.v,ie.w,ie.y),ke=(a(de={},"LABEL",(function(e){var t=e.depth,n=e.labelItems;return J(ve(),"label",me,ye(t),"_d25db_5brYF",n.map(he))})),a(de,"SUGGESTION",(function(e,t){var n=e.path,r=e.depth,s=e.tracking,i=e.labelItems,a=t.removeSuggestionButtonMarkup,o=t.rewriteSuggestionButtonMarkup,c=i.some((function(e){return[k,b].includes(e.type)})),u=[h,m].some((function(e){return s.type===e})),d=c&&!u;return J(pe(),n,s.index0,me,s.index0,"suggestion",ye(r),"_d25db_5brYF",i.map(he),a||(d?o:""))})),a(de,"SUGGESTION_WITH_IMAGE",(function(e,t){var n=e.path,r=e.image,s=e.depth,i=e.tracking,a=e.labelItems,o=e.sublabelItems,c=void 0===o?[]:o,u=t.removeSuggestionButtonMarkup,d=c.length?J(fe(),c.map(he)):"",l=i.type!==h;return J(ge(),n,i.index0,me,i.index0,ye(s),"suggestion-with-image",r.alt,r.source,Q(ie.s,l&&"_d25db_2XmN3"),"_d25db_M9bop",a.map(he),d,u)})),de);function be(){var e=B(['<div class="','">',"<input ","><label ",">","</label></div>"]);return be=function(){return e},e}function Se(){var e=B(['<hr class="','">']);return Se=function(){return e},e}var Ee=Q(ie.m,ie.j),Ie=Q(ie.c,ie.d,ie.e),_e=Q("_d25db_1ofoe",ie.r),we=J(Se(),ie.o);function Ce(){var e=B(['<button aria-hidden="true" class="','" data-role="','"><span class="','">',"</span></button>"]);return Ce=function(){return e},e}var xe=Q(ie.a,ie.t,ie.b,"_d25db_-tApQ"),Ae=Q(ie.A,ie.z,ie.x);function Ne(){var e=B(['<button aria-hidden="true" class="','" data-role="','"><i class="','"></i></button>']);return Ne=function(){return e},e}var Re=Q(ie.t,ie.x,"_d25db_3vb03"),Le=Q(ie.p,ie.q,"_d25db_1RU0n");function Te(){var e=B(["<div ",">"," ","</div>"]);return Te=function(){return e},e}var Oe=function(){function e(t,n,s){r(this,e),this.baseNode=t,this.store=n,this.searchInDescriptionsListeners=s}return i(e,[{key:"toggleSuggester",value:function(e){var t=this.baseNode.querySelector("._d25db_1eRLc"),n=this.baseNode.querySelector(F("search-input"));t&&(e?t.classList.add("_d25db_3YsZ2"):(n.removeAttribute("aria-activedescendant"),t.classList.remove("_d25db_3YsZ2"),t.classList.remove("_d25db_3ze9h")))}},{key:"updateSuggesterList",value:function(){var e=this.baseNode.querySelector("._d25db_1eRLc");e&&e.parentNode.removeChild(e),this.baseNode.querySelector(F("search-input")).insertAdjacentHTML("afterend",function(e){var t,n=e.suggester,r=n.list,s=n.isExpanded;if(!r.length&&!e.config.searchInDescriptionsEnabled)return"";var i,o=Q("_d25db_1eRLc",(a(t={},"_d25db_3YsZ2",s),a(t,"_d25db_3ze9h",!r.length&&s),t)),c=function(e){return e.suggester.recentlyTypedPhrases?J(Ce(),xe,"remove-recently-searched",Ae,"USUŃ"):""}(e),u=function(e){return e.suggester.recentlyTypedPhrases||!e.config.mobileFeaturesEnabled?"":J(Ne(),Re,"rewrite-recently-searched",Le)}(e),d=[{name:"role",value:"listbox"},{name:"id",value:"suggestions-listbox"},{name:"class",value:o},{name:"data-role",value:"suggestions-apron"}];return J(Te(),re(d),r.map((i={removeSuggestionButtonMarkup:c,rewriteSuggestionButtonMarkup:u},function(e){return ke[e.componentType](e,i)})),function(e){var t=e.config.searchInDescriptionsEnabled,n=e.suggester,r=(n=void 0===n?{}:n).list,s=void 0===r?[]:r,i=e.filters,a=(i=void 0===i?{}:i).checkedFilter,o=(a=void 0===a?{}:a).type,c=void 0===o?"":o,u=e.searchInDescriptions;if(!t||w(c))return"";var d=0!==s.length,l=[{name:"class",value:Ie},{name:"type",value:"checkbox"},{name:"data-role",value:"search-in-description"},{name:"autocomplete",value:"off"},u&&{name:"checked"}],h=[{name:"class",value:_e},{name:"data-role",value:"search-in-description-label"}];return J(be(),Ee,d?we:"",re(l),re(h),"szukaj też w opisach ofert")}(e))}(this.store.data)),this.searchInDescriptionsListeners.initialize()}},{key:"markActiveSuggestion",value:function(e){var t=this.baseNode.querySelector(F("search-input")),n=Array.from(this.baseNode.querySelectorAll(F("suggestion","suggestion-with-image"))),r=n.find((function(e){return e.getAttribute("aria-selected")}));r&&(r.removeAttribute("aria-selected"),r.classList.remove("_d25db_37Ux5")),n[e]&&(n[e].setAttribute("aria-selected","true"),n[e].classList.add("_d25db_37Ux5"),t.setAttribute("aria-activedescendant","suggestion-".concat(e)))}}]),e}();function Pe(){var e=B(["",""]);return Pe=function(){return e},e}function De(){var e=B(['<span class="','">','</span><span class="','">',"</span>"]);return De=function(){return e},e}var Fe=Q(ie.i,ie.n),qe=Q(ie.m,ie.k);function He(e,t){return Array.from(document.querySelectorAll(t)).some((function(t){return t.contains(e)}))}var Me=function(){function e(t,n,s){r(this,e),this.store=t,this.searchForm=n,this.cookieMonster=s}return i(e,[{key:"setRecentlyTypedPhrases",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.store.updateSuggesterList({suggestions:L(),recentlyTypedPhrases:!0,changeExpand:e,suggestionsRequestCounter:this.store.increaseRequestCounter()})}},{key:"handleSuggesterClick",value:function(){this.store.data.suggester.suggestions.length>0?this.store.changeSuggesterIsExpanded():this.store.data.search.phrase?this.store.updateSuggestions(this.store.data.search.phrase):this.setRecentlyTypedPhrases(!0)}},{key:"hideSuggester",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target;(t||t.classList)&&(t.classList.contains("_d25db_1734G")||t.classList.contains("_d25db_3Hi_w")||t.classList.contains("_d25db_3cWMZ")||He(t,"._d25db_1eRLc")||this.store.changeSuggesterIsExpanded(!1))}},{key:"handleSuggestionClick",value:function(e){var t=e.currentTarget.dataset.index,n=this.store.data.suggester.suggestions[t];this.store.markSuggestion(parseInt(t,10)),this.searchForm.submit(e),this.cookieMonster.sendClickEvent("suggestHintClick",n,t)}},{key:"handleSuggestionMouseover",value:function(e){var t=e.currentTarget.dataset.index;this.store.markSuggestion(parseInt(t,10))}},{key:"removeRecentlySearchedSuggestionFromView",value:function(e){e.stopPropagation(),e.preventDefault();var t,n=e.currentTarget.parentNode.dataset.index;t=parseInt(n,10),window.localStorage.setItem("recentlySearchedSuggestions",JSON.stringify(R().filter((function(e,n){return n!==t})))),this.setRecentlyTypedPhrases(),this.store.emitFocusOnSearchInput()}},{key:"rewriteTypedPhrase",value:function(e){e.stopPropagation(),e.preventDefault();var t=e.currentTarget.parentNode.dataset.index,n=this.store.data.suggester.suggestions[t];this.cookieMonster.sendClickEvent("suggestRewriteClick",n,t),this.store.updateCheckedFilter(n,!0),this.store.setPhrase(E(n)),this.store.emitFocusOnSearchInput()}}]),e}(),Ge=function(){function e(t,n,s){var i=this;r(this,e),a(this,"toggleSearchInDescriptions",(function(e){var t=e.target.previousSibling;i.store.changeSearchInDescription(!t.checked),i.cookieMonster.sendEvent("searchInDescriptionChange",i.store.data.searchInDescriptions)})),this.baseNode=t,this.store=n,this.cookieMonster=s}return i(e,[{key:"initialize",value:function(){var e=this,t=this.baseNode.querySelector(F("search-in-description-label"));t&&t.addEventListener("click",(function(t){e.toggleSearchInDescriptions(t)}))}}]),e}(),je=function(){function e(t){var n=this,s=t.baseNode,i=t.props;r(this,e),a(this,"onUpdate",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.phrase,r=void 0===t?"":t,s=e.includeDescription;n.store.data.search.phrase!==r&&n.store.setPhrase(r,!0),n.store.data.searchInDescriptions!==s&&n.store.changeSearchInDescription(s),""===r&&(n.store.changeSuggesterIsExpanded(!1),n.searchHandlers.toggleRemoveQuery())})),this.baseNode=s,this.store=new P(s,i),this.cookieMonster=new z(this.baseNode,this.store),this.searchInDescriptionsListeners=new Ge(this.baseNode,this.store,this.cookieMonster),this.suggester=new Oe(this.baseNode,this.store,this.searchInDescriptionsListeners),this.searchForm=new M(this.baseNode,this.store),this.suggesterHandlers=new Me(this.store,this.searchForm,this.cookieMonster),this.searchHandlers=new Y(this.baseNode,this.store,this.searchForm,this.cookieMonster)}return i(e,[{key:"onMount",value:function(){var e;(function(e){function t(){var t=e.baseNode.querySelectorAll(F("suggestion","suggestion-with-image")),n=e.baseNode.querySelectorAll(F("remove-recently-searched")),r=e.baseNode.querySelectorAll(F("rewrite-recently-searched"));t.forEach((function(t){t.addEventListener("click",(function(t){e.suggesterHandlers.handleSuggestionClick(t)}))})),t.forEach((function(t){t.addEventListener("mouseover",(function(t){e.suggesterHandlers.handleSuggestionMouseover(t)}))})),n.forEach((function(t){t.addEventListener("click",(function(t){e.suggesterHandlers.removeRecentlySearchedSuggestionFromView(t)}))})),r.forEach((function(t){t.addEventListener("click",(function(t){e.suggesterHandlers.rewriteTypedPhrase(t)}))}))}return{initialize:function(){t(),e.store.emitter.on("SUGGESTER_EXPAND_CHANGE",(function(t){e.suggester.toggleSuggester(t),e.cookieMonster.sendLayerViewEvent(t)})),e.store.emitter.on("SUGGESTER_LIST_CHANGE",(function(n){e.suggester.updateSuggesterList(),e.cookieMonster.sendSuggestsShowEvent(n),t()})),e.store.emitter.on("SUGGESTER_ACTIVE_INDEX_CHANGE",(function(t){e.suggester.markActiveSuggestion(t)}))}}})(this).initialize(),function(e){return{initialize:function(){e.baseNode.querySelector(F("filters-dropdown-toggle")).addEventListener("change",(function(t){e.store.changeDisplayedFilter(t.target.value)})),e.store.emitter.on("FILTER_CHANGE",(function(){!function(){var t=e.store.data.filters.checkedFilter.name;e.cookieMonster.sendEvent("filterChange",t);var n,r=e.baseNode.querySelector("span".concat(F("filters-selected-option")));r&&(r.innerHTML=(n=t)?"Wszystkie kategorie"===n?J(De(),Fe,"Wszędzie",qe,n):J(Pe(),n):"")}()}))}}}(this).initialize(),(e=this,{initialize:function(){var t,n,r;t=e.baseNode.querySelector(F("remove-query")),n=e.baseNode.querySelector(F("search-input")),r=e.baseNode.querySelector(F("search-button")),t&&t.addEventListener("click",(function(t){e.searchHandlers.handleRemoveQueryClick(t)})),n.addEventListener("click",(function(){e.suggesterHandlers.handleSuggesterClick(),e.searchHandlers.toggleRemoveQuery()})),n.addEventListener("input",(function(t){e.searchHandlers.handleSearchChange(t)})),n.addEventListener("keydown",(function(t){e.searchHandlers.handleKeyDown(t)})),r.addEventListener("click",(function(t){e.searchForm.submit(t)})),e.baseNode.addEventListener("keydown",(function(t){e.searchHandlers.handleEscapeKeyDown(t)})),document.addEventListener("click",(function(t){e.suggesterHandlers.hideSuggester(t)})),e.store.emitter.on("SEARCH_FORCE_FOCUS",(function(){e.searchHandlers.setFocusOnInput()})),e.store.emitter.on("SEARCH_PHRASE_CHANGE",(function(t){e.searchForm.changePhrase(t)})),e.store.emitter.on("SEARCH_IN_DESCRIPTIONS_CHANGE",(function(){e.searchForm.changeSearchInDescriptions()}))}}).initialize(),function(e){function t(){var t=document.createEvent("CustomEvent");t.initCustomEvent("multisearch-modal",!0,!0,{phrase:e.store.data.search.phrase}),window.dispatchEvent(t)}return{initialize:function(){var n,r;n=e.baseNode.querySelector(F("search-input")),(r=e.baseNode.querySelector(F("multisearch-button")))&&r.addEventListener("click",(function(){t()})),n.addEventListener("click",(function(){e.store.checkDisplayModalAfterClick()&&(t(),e.cookieMonster.sendEvent("modalDisplayAfterClick","1"))}))}}}(this).initialize(),window.opbox.performance.markTimeToInteractive(o.a)}}]),e}();window.opbox.component.register({prototypeName:"allegro.metrumHeader.search"},je)},YcCt:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,s){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;s&&"number"==typeof s.maxKeys&&(o=s.maxKeys);var c=e.length;o>0&&c>o&&(c=o);for(var u=0;u<c;++u){var d,l,h,g,f=e[u].replace(a,"%20"),p=f.indexOf(n);p>=0?(d=f.substr(0,p),l=f.substr(p+1)):(d=f,l=""),h=decodeURIComponent(d),g=decodeURIComponent(l),r(i,h)?Array.isArray(i[h])?i[h].push(g):i[h]=[i[h],g]:i[h]=g}return i}},gEZS:function(e,t){var n=Array.prototype.slice;function r(e){return"function"==typeof e}function s(e){if(!r(e))throw TypeError("Invalid listener")}function i(e,t,r){switch(r.length){case 1:t.call(e);break;case 2:t.call(e,r[1]);break;case 3:t.call(e,r[1],r[2]);break;default:t.apply(e,n.call(r,1))}}function a(e,t,n,i){s(n);var a=e.$e||(e.$e={}),o=a[t];return o?r(o)?a[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n):a[t]=n,e}function o(){this.$e=this.$e||{}}o.EventEmitter=o,o.prototype={$e:null,emit:function(e){var t=arguments,s=this.$e;if(s){var a=s&&s[e];if(!a){if("error"===e){var o=t[1];if(!(o instanceof Error)){var c=o;(o=Error("Error: "+c)).context=c}throw o}return!1}if(r(a))i(this,a,t);else for(var u=0,d=(a=n.call(a)).length;u<d;u++){var l=a[u];i(this,l,t)}return!0}},on:function(e,t){return a(this,e,t,!1)},prependListener:function(e,t){return a(this,e,t,!0)},once:function(e,t){return s(t),this.on(e,(function n(){this.removeListener(e,n),t&&(t.apply(this,arguments),t=null)})),this},removeListener:function(e,t){s(t);var n,i=this.$e;if(i&&(n=i[e]))if(r(n))n===t&&delete i[e];else for(var a=n.length-1;a>=0;a--)n[a]===t&&n.splice(a,1);return this},removeAllListeners:function(e){var t=this.$e;t&&delete t[e]},listenerCount:function(e){var t=this.$e,n=t&&t[e];return n?r(n)?1:n.length:0}},e.exports=o},kiQV:function(e){e.exports=JSON.parse('{"a":"opbox-search"}')},r8II:function(e,t,n){"use strict";t.decode=t.parse=n("YcCt"),t.encode=t.stringify=n("6MUB")},xxrt:function(e){e.exports=JSON.parse('{"a":"_13q9y","b":"_8hkto","c":"_1wmuz","r":"_u2xi2","d":"_con24","e":"_11cms","f":"_1qzku","g":"_1y62o","h":"_9xrqs","l":"_1bo4a","i":"_mitvy","m":"_lsy4e","j":"_1mfty","k":"_1u1ui","n":"_12fk0","o":"_d7szm","p":"_nem5f","q":"_1x8cc","s":"_1t9p2","v":"_180tx","w":"_4lbi0","u":"_6kfrx","t":"_1sql3","y":"_1fwkl","x":"_qdoeh","A":"_l7nkx","z":"_nyhhx"}')}}));
//# sourceMappingURL=index_aca9becc.js.map